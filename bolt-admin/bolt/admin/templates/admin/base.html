<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {%- if title|default('') -%}
            {{ title }} - Bolt Admin
        {%- else -%}
            Bolt Admin
        {%- endif -%}
    </title>
    <link href="{{ static('dist/tailwind.css') }}" rel="stylesheet">
    <link href="{{ static('admin/admin.css') }}" rel="stylesheet">
    <script src="{{ static('admin/chart.js') }}"></script>
</head>
<body class="flex min-h-screen text-white bg-zinc-900">
    <div class="fixed flex flex-col justify-between flex-shrink-0 w-64 h-full px-6 pt-6 pb-3">
        <div>
            <a class="font-bold" href="{{ url('admin:index') }}">Bolt Admin</a>
            <div class="mt-4 space-y-2.5">
                {% for view in admin_registry.get_nav_views() %}
                <a class="block px-2 py-0.5 -mx-2 hover:text-white rounded text-zinc-200 hover:bg-zinc-600" href="{{ url('admin:' + view.view_name() )}}">{{ view.title }}</a>
                {% endfor %}
            </div>
        </div>
        <div class="flex items-center justify-between text-sm text-zinc-200">
            <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="w-4 h-4 mr-2 bi bi-person-circle" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                </svg>
                {{ request.user }}
            </div>
            <a class="hover:text-white hover:underline" href="{{ url('logout') }}">Log out</a>
        </div>
    </div>
    <div class="flex-grow ml-64 overflow-auto text-black rounded-l-lg bg-stone-100">
        <div class="flex justify-between px-8 py-4 text-sm border-b border-gray-200">
            <div class="flex items-center space-x-2">
                <a class="text-gray-700" href="{{ url ('admin:index') }}">Admin</a>
                {% for parent in parent_view_classes %}
                <span class="text-gray-600">/</span>
                <a class="text-gray-700" href="{{ url('admin:' + parent.view_name()) }}">{{ parent.title }}</a>
                {% endfor %}
                <span class="text-gray-600">/</span>
                <a href="{{ request.path }}">{{ title }}</a>
            </div>
            <div>
                <a href="/">Back to app</a>
            </div>
        </div>

        <div class="flex items-center justify-between px-8 mt-8">
            <div>
            {% block header %}
                <h1 class="text-2xl font-semibold">{{ title }}</h1>
                {% if description %}
                <p class="mt-2 text-sm text-gray-600">{{ description }}</p>
                {% elif object|default('') %}
                <p class="mt-2 text-sm text-gray-600">{{ object.__repr__() }}</p>
                {% endif %}
            {% endblock %}
            </div>
            <div class="flex space-x-2 text-sm actions">
                {% block actions %}{% endblock %}
            </div>
        </div>

        <div class="px-8 py-6">
            {% if cards %}
            <div class="grid grid-cols-4 gap-6 mb-6">
            {% for card in cards %}
                <div class="card
                    {% if card.size.value == 1 -%}
                    col-span-1
                    {%- elif card.size.value == 2 -%}
                    col-span-2
                    {%- elif card.size.value == 3 -%}
                    col-span-3
                    {%- elif card.size.value == 4 -%}
                    col-span-4
                    {%- endif -%}">

                    {{ render_card(card)|safe }}

                </div>
            {% endfor %}
            </div>
            {% endif %}

            <main>{% block content %}{% endblock %}</main>
        </div>
    </div>

    <!-- TODO only if installed -->
    {% stafftoolbar %}

</body>
</html>
